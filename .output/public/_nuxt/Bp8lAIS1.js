import{d as T,H as M,F as B,r as n,c as H,M as A,o as E,e as P,t as u,v as d,x as s,N as $,O as b,L as a,J as D,K as R,y as _,P as k,Q as q,_ as F}from"./DeNziqTa.js";import{u as I}from"./D1tFJyUk.js";import{u as O}from"./BdtbRVB3.js";const Y={class:"post-detail"},z={class:"post-detail-inner"},G={class:"catalog"},J={class:"catalog-inner"},K={class:"catalog-title"},Q={class:"catalog-items"},U=["href","onClick"],V={class:"post-title"},j={class:"post-time"},W=["innerHTML"],X=T({name:"PostDetail",__name:"index",async setup(Z){let p,m;const y=M(),f=O(),{currentPost:c,currentPostCompile:S}=B(f),r=n([]),l=n([]),i=n(0),x=H(()=>{for(let t=0;t<l.value.length;t+=1){const e=l.value[t],o=l.value[t+1];if(!o||i.value>=e&&i.value<o)return t}return 0}),v=()=>{i.value=Math.abs(Math.round(window.scrollY))},C=()=>{window.addEventListener("scroll",v)},g=n(null),w=n(null),N=()=>{const t=g.value.getElementsByClassName("catalog-item-hook");let e=0;l.value.push(e);for(let o=0;o<t.length;o+=1)e=t[o].getBoundingClientRect().top,l.value.push(e)},L=t=>{const e=document.querySelector(t)??{offsetTop:0};window.scrollTo({top:e.offsetTop-60,behavior:"smooth"})};return[p,m]=A(()=>f.showPost(y.params.id)),await p,m(),I({title:c.value.title}),E(()=>{Array.from(w.value.querySelectorAll("h1,h2,h3,h4,h5,h6")).forEach((t,e)=>{t.id=`${t.localName}-${e}`,t.className="catalog-item-hook",r.value.push({tagName:t.localName,text:t.innerText,href:`#${t.localName}-${e}`})}),C(),N()}),P(()=>{window.removeEventListener("scroll",v)}),(t,e)=>(u(),d("div",Y,[s("div",z,[s("div",G,[s("div",J,[$(s("p",K,"CATALOG",512),[[b,a(r).length]]),s("ul",Q,[(u(!0),d(D,null,R(a(r),(o,h)=>(u(),d("li",{key:h,class:k(["catalog-item","catalog-item-"+o.tagName])},[s("a",{class:k(["catalog-link",{"catalog-link-active":h===a(x)}]),href:o.href,onClick:q(tt=>L(o.href),["prevent"])},_(o.text),11,U)],2))),128))])])]),s("div",{class:"post-wrapper",ref_key:"post",ref:g},[s("h1",V,_(a(c).title),1),s("p",j,_(a(c).created_at),1),s("div",{class:"markdown-body",innerHTML:a(S),ref_key:"content",ref:w},null,8,W)],512)])]))}}),at=F(X,[["__scopeId","data-v-c8d24593"]]);export{at as default};
