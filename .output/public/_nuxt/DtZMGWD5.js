import{d as L,M,J as B,r as n,c as H,N as A,o as E,e as P,t as u,v as d,x as s,R as $,S as b,H as a,O as R,P as D,y as _,K as k,T as q,_ as I}from"./B_VHvxBh.js";import{u as O}from"./CRsUetOg.js";import{u as Y}from"./DUDKzhn9.js";const z={class:"post-detail"},F={class:"post-detail-inner"},G={class:"catalog"},J={class:"catalog-title"},K={class:"catalog-items"},U=["href","onClick"],V={class:"post-title"},j={class:"post-time"},Q=["innerHTML"],W=L({name:"PostDetail",__name:"index",async setup(X){let p,m;const y=M(),f=Y(),{currentPost:c,currentPostCompile:S}=B(f),r=n([]),l=n([]),i=n(0),x=H(()=>{for(let t=0;t<l.value.length;t+=1){const e=l.value[t],o=l.value[t+1];if(!o||i.value>=e&&i.value<o)return t}return 0}),v=()=>{i.value=Math.abs(Math.round(window.scrollY))},C=()=>{window.addEventListener("scroll",v)},g=n(null),w=n(null),N=()=>{const t=g.value.getElementsByClassName("catalog-item-hook");let e=0;l.value.push(e);for(let o=0;o<t.length;o+=1)e=t[o].getBoundingClientRect().top,l.value.push(e)},T=t=>{const e=document.querySelector(t)??{offsetTop:0};window.scrollTo({top:e.offsetTop-60,behavior:"smooth"})};return[p,m]=A(()=>f.showPost(y.params.id)),await p,m(),O({title:c.value.title}),E(()=>{Array.from(w.value.querySelectorAll("h1,h2,h3,h4,h5,h6")).forEach((t,e)=>{t.id=`${t.localName}-${e}`,t.className="catalog-item-hook",r.value.push({tagName:t.localName,text:t.innerText,href:`#${t.localName}-${e}`})}),C(),N()}),P(()=>{window.removeEventListener("scroll",v)}),(t,e)=>(u(),d("div",z,[s("div",F,[s("div",G,[$(s("p",J,"CATALOG",512),[[b,a(r).length]]),s("ul",K,[(u(!0),d(R,null,D(a(r),(o,h)=>(u(),d("li",{key:h,class:k(["catalog-item","catalog-item-"+o.tagName])},[s("a",{class:k(["catalog-link",{"catalog-link-active":h===a(x)}]),href:o.href,onClick:q(Z=>T(o.href),["prevent"])},_(o.text),11,U)],2))),128))])]),s("div",{class:"post",ref_key:"post",ref:g},[s("h1",V,_(a(c).title),1),s("p",j,_(a(c).created_at),1),s("div",{class:"markdown-body",innerHTML:a(S),ref_key:"content",ref:w},null,8,Q)],512)])]))}}),st=I(W,[["__scopeId","data-v-2eb44723"]]);export{st as default};
