import{d as T,M as b,J as L,o as M,e as P,I as B,i as C,t as a,v as n,x as r,N as v,O as g,H as E,y as u,z as f,A as y,B as x,P as N,_ as S}from"./DZRu2iXf.js";import{u as V,m as R}from"./BxQh3C1k.js";const j={class:"post-list"},q={class:"post-items"},I={class:"post-time"},z={class:"post-title"},A=["innerHTML"],D={key:0},F={style:{"margin-top":"0"}},J=T({name:"PostList",__name:"index",setup(O){const m=b(),l=V(),{posts:_,selectTags:d,curPage:c,allPage:p}=L(l);M(()=>{window.addEventListener("scroll",h),_.value=[],c.value=1,p.value=0,m.query.tags?d.value=[{id:m.query.tags}]:l.indexPost()}),P(()=>{window.removeEventListener("scroll",h)}),B(()=>d.value,async e=>{const s=e.map(o=>o.id).join(",");s&&await l.indexPost({tags:s})});const w=e=>R.parse(e),h=()=>{const e=document.body.scrollTop||document.documentElement.scrollTop,s=document.body.scrollHeight||document.documentElement.scrollHeight,o=window.innerHeight;s-(e+o)<=.5&&k()},k=()=>{if(c.value+1<=p.value){c.value++;const e=d.value.map(s=>s.id).join(",");l.indexPost({index:c.value,tags:e})}else console.log("finished")};return(e,s)=>{const o=C("router-link");return a(),n("div",j,[r("ul",q,[(a(!0),n(v,null,g(E(_),t=>(a(),n("li",{key:t.id,class:"post-item"},[r("p",I,u(t.created_at),1),r("h1",z,[f(o,{to:"/posts/"+t.id},{default:y(()=>[x(u(t.title),1)]),_:2},1032,["to"])]),r("div",{class:"post-abstract markdown-body",innerHTML:w(t.abstract)},null,8,A),t.abstract?(a(),n("p",D,[f(o,{to:"/posts/"+t.id,class:"post-entry"},{default:y(()=>[x(" Read More... ")]),_:2},1032,["to"])])):N("",!0),r("p",F,[(a(!0),n(v,null,g(t.tags.sort((i,H)=>i.name.localeCompare(H.name)),i=>(a(),n("span",{key:i.id,class:"post-tag"},u(i.name),1))),128))])]))),128))])])}}}),K=S(J,[["__scopeId","data-v-53702ba9"]]);export{K as default};
