import{d as L,N as B,K as H,r as n,c as M,O as A,o as E,e as P,t as u,v as d,x as s,S as $,T as b,H as a,P as D,Q as R,y as _,L as k,U as q,_ as I}from"./DLSY-3Be.js";import{u as O}from"./foxdKrfr.js";import{u as U}from"./QLoAUO6_.js";const Y={class:"post-detail"},z={class:"post-detail-inner"},F={class:"catalog"},G={class:"catalog-title"},K={class:"catalog-items"},Q=["href","onClick"],V={class:"post-title"},j={class:"post-time"},J=["innerHTML"],W=L({name:"PostDetail",__name:"index",async setup(X){let p,m;const y=B(),f=U(),{currentPost:c,currentPostCompile:S}=H(f),r=n([]),l=n([]),i=n(0),x=M(()=>{for(let t=0;t<l.value.length;t+=1){const e=l.value[t],o=l.value[t+1];if(!o||i.value>=e&&i.value<o)return t}return 0}),v=()=>{i.value=Math.abs(Math.round(window.scrollY))},C=()=>{window.addEventListener("scroll",v)},g=n(null),w=n(null),N=()=>{const t=g.value.getElementsByClassName("catalog-item-hook");let e=0;l.value.push(e);for(let o=0;o<t.length;o+=1)e=t[o].getBoundingClientRect().top,l.value.push(e)},T=t=>{const e=document.querySelector(t)??{offsetTop:0};window.scrollTo({top:e.offsetTop-60,behavior:"smooth"})};return[p,m]=A(()=>f.showPost(y.params.id)),await p,m(),O({title:c.value.title}),E(()=>{Array.from(w.value.querySelectorAll("h1,h2,h3,h4,h5,h6")).forEach((t,e)=>{t.id=`${t.localName}-${e}`,t.className="catalog-item-hook",r.value.push({tagName:t.localName,text:t.innerText,href:`#${t.localName}-${e}`})}),C(),N()}),P(()=>{window.removeEventListener("scroll",v)}),(t,e)=>(u(),d("div",Y,[s("div",z,[s("div",F,[$(s("p",G,"CATALOG",512),[[b,a(r).length]]),s("ul",K,[(u(!0),d(D,null,R(a(r),(o,h)=>(u(),d("li",{key:h,class:k(["catalog-item","catalog-item-"+o.tagName])},[s("a",{class:k(["catalog-link",{"catalog-link-active":h===a(x)}]),href:o.href,onClick:q(Z=>T(o.href),["prevent"])},_(o.text),11,Q)],2))),128))])]),s("div",{class:"post",ref_key:"post",ref:g},[s("h1",V,_(a(c).title),1),s("p",j,_(a(c).created_at),1),s("div",{class:"markdown-body",innerHTML:a(S),ref_key:"content",ref:w},null,8,J)],512)])]))}}),st=I(W,[["__scopeId","data-v-65480e1a"]]);export{st as default};
