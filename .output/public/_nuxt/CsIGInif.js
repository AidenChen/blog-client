import{d as w,H as P,F as T,o as b,I as B,i as C,J as N,t as s,v as a,K as S,L as v,M as f,N as D,x as n,y as u,z as x,A as g,B as h,_ as H}from"./BlKf6GOT.js";import{u as R,m as V}from"./BjsvXlwN.js";const j={class:"post-list"},q={class:"post-time"},F={class:"post-title"},I=["innerHTML"],z=w({name:"PostList",__name:"index",setup(A){const _=P(),r=R(),{posts:p,selectTags:d,curPage:l,allPage:m}=T(r);b(()=>{p.value=[],l.value=1,m.value=0,_.query.tags?d.value=[{id:_.query.tags}]:r.indexPost()}),B(()=>d.value,async t=>{const o=t.map(i=>i.id).join(",");o&&await r.indexPost({tags:o})});const k=t=>V.parse(t),y=()=>{if(l.value+1<=m.value){l.value++;const t=d.value.map(o=>o.id).join(",");r.indexPost({index:l.value,tags:t})}else console.log("finished")};return(t,o)=>{const i=C("router-link"),M=N("load-more");return s(),a("div",j,[S((s(),a("ul",{class:"post-items",onLoadMore:y},[(s(!0),a(v,null,f(D(p),e=>(s(),a("li",{key:e.id,class:"post-item"},[n("p",q,u(e.created_at),1),n("h1",F,[x(i,{to:"/posts/"+e.id},{default:g(()=>[h(u(e.title),1)]),_:2},1032,["to"])]),n("div",{class:"post-abstract markdown-body",innerHTML:k(e.abstract)},null,8,I),n("p",null,[x(i,{to:"/posts/"+e.id,class:"post-entry"},{default:g(()=>[h(" Read More... ")]),_:2},1032,["to"])]),n("p",null,[(s(!0),a(v,null,f(e.tags.sort((c,L)=>c.name.localeCompare(L.name)),c=>(s(),a("span",{key:c.id,class:"post-tag"},u(c.name),1))),128))])]))),128))],32)),[[M,{selector:".post-list"}]])])}}}),K=H(z,[["__scopeId","data-v-db2922fe"]]);export{K as default};
