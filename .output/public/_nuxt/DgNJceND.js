import{d as C,N as M,K as P,r as B,O as E,o as N,e as S,i as R,t,v as s,x as i,P as f,Q as k,H as V,y as d,z as x,A as w,B as b,R as u,_ as q}from"./BJhRLVcp.js";import{u as A,m as z}from"./KDdJr-tk.js";const D={class:"post-list"},F={class:"post-list-inner"},I={class:"post-time"},K={class:"post-title"},O=["innerHTML"],Q={key:1},U={key:2,style:{"margin-top":"0"}},j=C({name:"PostList",__name:"index",async setup(G){let _,m;const l=M(),c=A(),{posts:p,curPage:o,allPage:g}=P(c);p.value=[],o.value=1,g.value=0;const h=B("");l.query.tags&&(h.value=l.query.tags),[_,m]=E(()=>c.indexPost({tags:h.value})),await _,m(),N(()=>{window.addEventListener("scroll",v)}),S(()=>{window.removeEventListener("scroll",v)});const H=a=>z.parse(a),v=()=>{const a=document.body.scrollTop||document.documentElement.scrollTop,y=document.body.scrollHeight||document.documentElement.scrollHeight,n=window.innerHeight;y-(a+n)<=.5&&L()},L=()=>{o.value+1<=g.value?(o.value++,c.indexPost({index:o.value,tags:l.query.tags??""})):console.log("finished")};return(a,y)=>{const n=R("router-link");return t(),s("div",D,[i("ul",F,[(t(!0),s(f,null,k(V(p),e=>(t(),s("li",{key:e.id,class:"post-item"},[i("p",I,d(e.created_at),1),i("h1",K,[x(n,{to:"/posts/"+e.id},{default:w(()=>[b(d(e.title),1)]),_:2},1032,["to"])]),e.abstract?(t(),s("div",{key:0,class:"post-abstract markdown-body",innerHTML:H(e.abstract)},null,8,O)):u("",!0),e.abstract?(t(),s("p",Q,[x(n,{to:"/posts/"+e.id,class:"post-entry"},{default:w(()=>[b(" Read More... ")]),_:2},1032,["to"])])):u("",!0),e.tags.length?(t(),s("p",U,[(t(!0),s(f,null,k(e.tags.sort((r,T)=>r.name.localeCompare(T.name)),r=>(t(),s("span",{key:r.id,class:"post-tag"},d(r.name),1))),128))])):u("",!0)]))),128))])])}}}),X=q(j,[["__scopeId","data-v-6966bc4e"]]);export{X as default};
