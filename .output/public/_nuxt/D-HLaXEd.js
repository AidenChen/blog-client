import{d as b,M as L,J as M,o as P,e as B,I as C,i as E,t as s,v as o,x as d,N as v,O as f,H as N,y as u,z as y,A as k,B as x,P as m,_ as S}from"./0vf9qYyk.js";import{u as V,m as R}from"./CPbS_0TA.js";const j={class:"post-list"},q={class:"post-items"},I={class:"post-time"},z={class:"post-title"},A=["innerHTML"],D={key:1},F={key:2,style:{"margin-top":"0"}},J=b({name:"PostList",__name:"index",setup(O){const _=L(),r=V(),{posts:p,selectTags:i,curPage:l,allPage:h}=M(r);P(()=>{window.addEventListener("scroll",g),p.value=[],l.value=1,h.value=0,_.query.tags?i.value=[{id:_.query.tags}]:r.indexPost()}),B(()=>{window.removeEventListener("scroll",g)}),C(()=>i.value,async t=>{const a=t.map(n=>n.id).join(",");a&&await r.indexPost({tags:a})});const w=t=>R.parse(t),g=()=>{const t=document.body.scrollTop||document.documentElement.scrollTop,a=document.body.scrollHeight||document.documentElement.scrollHeight,n=window.innerHeight;a-(t+n)<=.5&&H()},H=()=>{if(l.value+1<=h.value){l.value++;const t=i.value.map(a=>a.id).join(",");r.indexPost({index:l.value,tags:t})}else console.log("finished")};return(t,a)=>{const n=E("router-link");return s(),o("div",j,[d("ul",q,[(s(!0),o(v,null,f(N(p),e=>(s(),o("li",{key:e.id,class:"post-item"},[d("p",I,u(e.created_at),1),d("h1",z,[y(n,{to:"/posts/"+e.id},{default:k(()=>[x(u(e.title),1)]),_:2},1032,["to"])]),e.abstract?(s(),o("div",{key:0,class:"post-abstract markdown-body",innerHTML:w(e.abstract)},null,8,A)):m("",!0),e.abstract?(s(),o("p",D,[y(n,{to:"/posts/"+e.id,class:"post-entry"},{default:k(()=>[x(" Read More... ")]),_:2},1032,["to"])])):m("",!0),e.tags.length?(s(),o("p",F,[(s(!0),o(v,null,f(e.tags.sort((c,T)=>c.name.localeCompare(T.name)),c=>(s(),o("span",{key:c.id,class:"post-tag"},u(c.name),1))),128))])):m("",!0)]))),128))])])}}}),K=S(J,[["__scopeId","data-v-08dace74"]]);export{K as default};
